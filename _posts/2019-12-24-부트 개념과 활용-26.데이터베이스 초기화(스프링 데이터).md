---
title: "부트 개념과 활용-26.데이터베이스 초기화(스프링 데이터)"
date: 2019-12-24
categories:
- Back-end
tags:
- Spring 
- Boot
comments : true
---


## 스프링 데이터 7부: 데이터베이스 초기화

### JPA를 사용한 데이터베이스 초기화
spring.jpa.hibernate.ddl-auto
spring.jpa.generate-dll=true로 설정 해줘야 동작함.

ex.         
~~~xml
## 돌릴때마다 drop - create, 데이터 다 날아감. 
#spring.jpa.hibernate.ddl-auto=create
## 스키마가 없는 거만 바꾼다.(엔티티에 칼럼 신규 추가시 반영, 하이버네이트가 이름 바꾼건 인식 못함. username -> name 모른다, name 만 신규 생성. 기존 username을 지우지는 못한다. 칼럼 지저분해짐)
spring.jpa.hibernate.ddl-auto=update     
## 검증만 한다 (ex.테이블에 엔티티로 새로 만든 값 있으면 에러)
#spring.jpa.hibernate.ddl-auto=validate

spring.jpa.generate-ddl=true
spring.jpa.show-sql=true
~~~

초반 개발시에는 update로 사용하다가 (스카마가 지저분해짐. 이름을 바꾸거나 안쓰는 칼럼들이 그대로 남아있음)          
어느정도 안정되고, 배포시기쯤 되면 테스트에서 깔끔한 스키마를 생상하도록 만든 다음 넣어놓고,       
validate로 사용.


### SQL 스크립트를 사용한 데이터베이스 초기화
- schema.sql 또는 schema-${platform}.sql
- data.sql 또는 data-${platform}.sql 
- ${platform} 값은 spring.datasource.platform 으로 설정 가능(플랫폼에 특화된 sql도 가능)
>spring.datasource.platform=postgresql
설정 후 schema-postgresql.sql


