---  
title: "스프링 웹 MVC-15.HEAD와 OPTIONS, 커스텀 애노테이션(요청 맵핑하기)"
date: 2020-01-01
categories: 
- Back-end
tags:
- Spring 
- Spring MVC
comments : true
---

## HTTP 요청 맵핑하기 5부: HEAD와 OPTIONS 요청 처리
우리가 구현하지 않아도 스프링 웹 MVC에서 자동으로 처리하는 HTTP Method
- HEAD
- OPTIONS

HEAD
- GET 요청과 동일하지만 응답 본문을 받아오지 않고 응답 헤더만 받아온다.
> 리소스에 대한 간략한 정보를 가져오는 것. 


OPTIONS
- 사용할 수 있는 HTTP Method 제공
- 서버 또는 특정 리소스가 제공하는 기능을 확인할 수 있다. 
- 서버는 Allow 응답 헤더에 사용할 수 있는 HTTP Method 목록을 제공해야 한다.
> 해당 서버가 살아있는지, ex. ping 식으로 사용.           
응답 200으로 받아오는지, 특정 헤더가 들어있는지, 허용하는지 등 확인.


참고
- https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html
- https://github.com/spring-projects/spring-framework/blob/master/spring-test/src/test/java/org/springframework/test/web/servlet/samples/standalone/resultmatchers/HeaderAssertionTests.java

~~~java
    @Test // 성공
    public void helloTest() throws Exception {
        mockMvc.perform(options("/hello"))
                .andDo(print())
                .andExpect(status().isOk())
                .andExpect(header().exists(HttpHeaders.ALLOW))
                .andExpect(header().stringValues(HttpHeaders.ALLOW,
                        hasItems(
                                containsString("OPTIONS"),
                                containsString("HEAD"),
                                containsString("POST"),
                                containsString("GET"),
                                containsString("DELETE"),
                                containsString("PATCH"),
                                containsString("PUT")
                                ))) // 순서 상관없이 확인 가능
        ;
    }
~~~    

~~~
MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Allow:"GET,HEAD,POST,PUT,PATCH,DELETE,OPTIONS"]
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []

~~~
