---
title: "스프링 웹 MVC-04.DispatcherServlet"
date: 2019-12-29
categories: 
- Back-end
tags:
- Spring 
- Spring Web MVC
- DispatcherServlet
comments : true
---

## DispatcherServlet 1부

DispatcherServlet 초기화
- 다음의 특별한 타입의 빈들을 찾거나, 기본 전략에 해당하는 빈들을 등록한다.
- HandlerMapping: 핸들러를 찾아주는 인터페이스
- HandlerAdapter: 핸들러를 실행하는 인터페이스
- HandlerExceptionResolver
- ViewResolver
- ...



DispatcherServlet 동작 순서
1. 요청을 분석한다. (로케일, 테마, 멀티파트 등)
2. (핸들러 맵핑에게 위임하여) 요청을 처리할 핸들러를 찾는다. 
3. (등록되어 있는 핸들러 어댑터 중에) 해당 핸들러를 실행할 수 있는 “핸들러 어댑터”를 찾는다.
4. 찾아낸 “핸들러 어댑터”를 사용해서 핸들러의 응답을 처리한다.
  - 핸들러의 리턴값을 보고 어떻게 처리할지 판단한다.
    - 뷰 이름에 해당하는 뷰를 찾아서 모델 데이터를 랜더링한다.
    - @ResponseEntity가 있다면 Converter를 사용해서 응답 본문을 만들고.
5. (부가적으로) 예외가 발생했다면, 예외 처리 핸들러에 요청 처리를 위임한다.
6. 최종적으로 응답을 보낸다.

HandlerMapping
- RequestMappingHandlerMapping

HandlerAdapter
- RequestMappingHandlerAdapter


어떤 방식으로 DispatcherServlet 가 돌아가는가?
- 디버깅을 통해 타고 들어가는 소스 확인.

디스패처 서블릿이 사용될 때
doService()
doDispatch()
멀티파트(파일업로드) 등 타입 체크
후
getHandler(processedRequest)
이 요청을 처리할 수 있는 핸들러를 찾아온다 
기본적으로 
기본적으로 ㄱ디스패처 
서블릿이 
서블릿이 가지고 
서블릿이 가지고 있는 핸들러 
서블릿이 가지고 있는 핸들러 매핑 중에서 
2개 
빈 네임 유알엘 핸들러 매핑
리퀘스트 매핑 핸들러 매핑 -> 실질적으로 이 핸들러 매핑이 어노테이션 등 핸들러를 찾아주는 녀석
1로 찾으면 널
2로 찾아온다.
핸들러가 널이 아니다.
리턴한다 핸들러 

핸들러 어댑터를 찾는다.











