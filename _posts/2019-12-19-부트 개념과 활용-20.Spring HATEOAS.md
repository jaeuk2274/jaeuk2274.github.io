---
title: "부트 개념과 활용-20.Spring HATEOAS"
date: 2019-12-19
categories:
- Back-end
tags:
- Spring 
- Boot
- HATEOAS
comments : true
---

## 스프링 웹 MVC 10부: Spring HATEOAS

HATEOAS를 구현하기 위해 필요한 기능을 제공하는 일종의 툴.


### HATEOAS
Hypermedia As The Engine Of Application State          

- 서버: 현재 리소스와 연관된 링크 정보를 클라이언트에게 제공한다.
- 클라이언트: 연관된 링크 정보를 바탕으로 리소스에 접근한다.
- 연관된 링크 정보
   - Relation
   - Hypertext Reference)
- spring-boot-starter-hateoas 의존성 추가
- [https://spring.io/understanding/HATEOAS](https://spring.io/understanding/HATEOAS)
- [https://spring.io/guides/gs/rest-hateoas/](https://spring.io/guides/gs/rest-hateoas/)
- [https://docs.spring.io/spring-hateoas/docs/current/reference/html/](https://docs.spring.io/spring-hateoas/docs/current/reference/html/)


ㅊ설명 정리 


결론적으로는 REST R Representational

리소스에 대한 정보를 제공할 때 연관이 되어있는 링크정보들까지 같이 제공을 하고

클라이언트는 그 연관된 링크정보를 바탕으로

리소스에 접근하는 것

ex. root에 대한 리소스 요청
- 나는 self 는 현재 페이지

루트페이지에 관련된 리소스 정보는
리레이션은 나 자신이다. 링크에는 루트

또다른 링크에는 웹사이트가 북을 조회할 수 있는 

리레이션에 북스

연관된 링크 정보들을 넣어주면

루트를 연결한다음에

루트와 연관된 리소스들이 이런게 있구나

난 근데 그 중에서 북에 가고싶다.

북의 href를 읽은 다음에 

그리로 간다.


~~~
{
  "content":"Hello, User!"
  }
~~~

이러한 부가정보를 더 

~~~
{
  "content":"Hello, User!",
  "_links":{
    "self":{
      "href":"http://localhost:8080/greeting?name=User"
    }
  }
}
~~~
깃허브 API에 적용됨.






### 실습
~~~java
@RestController // 그냥 Controller 아님
public class SampleController {

    @GetMapping("/hello")
    public Hello hello(){
        Hello hello = new Hello();
        hello.setPrefix("hey, ");
        hello.setName("jaeuk");
        Resource<Hello> helloResource = new Resource<>(hello);
        helloResource.add(linkTo(SampleController.class).hello()).withSelfRel())

        return helloResource;
    }
}
~~~


~~~java
@ExtendWith(SpringExtension.class) // junit 5 기준
@WebMvcTest(SampleController.class)
class SampleControllerTest {

    @Autowired
    MockMvc mockMvc;
    @Test
    public void hello() throws Exception {
        mockMvc.perform(get("/hello"))
        .andExpect(status().isOk())
        .andExpect(jsonPath("$._links.self").exists());
    }
}
~~~




1. 오브젝트 매퍼
> 여러 가지 이유로 많이 사용됨
  객체를 제이슨으로 변환할 때 (잭슨)
  스프링 부트 스타터 웹만 있어도 빈으로 등록을 해 준다.(그냥 주입받아 사용하면 됨.)
  
  커스터마이징 하고싶으면 spring.jackson. ... 커스텀 하면 됨

2. 링크 디스커버러ㅌ

xpath를 확장해허 만든
해이토스를 지원한다.


겟 리소스 바이 릴레이션 사용해서 셀프에 해당하는 링크정보를 가져온다던가..

유틸리티성 클래스. 빈으로 등록되어있으니 그냥사영하면 됨.




ObjectMapper 제공
- spring.jackson.*
- Jackson2ObjectMapperBuilder

LinkDiscovers 제공
- 클라이언트 쪽에서 링크 정보를 Rel 이름으로 찾을때 사용할 수 있는 XPath 확장 클래스





 
